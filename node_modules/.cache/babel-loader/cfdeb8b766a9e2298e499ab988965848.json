{"ast":null,"code":"var _jsxFileName = \"/home/administrateur/Projet/lyon-0919-react-p2-brick-breaker/src/pages/Game.js\";\nimport React, { Component } from 'react';\nimport './Game.css';\nimport Point from '../components/Point';\nimport Bricks from '../components/Bricks';\nimport Pad from '../components/Pad';\nimport Bonus from '../components/Bonus';\nimport MoveBart from '../components/MoveBart';\nimport Popuploose from '../components/Popuploose';\nimport Popupwin from '../components/Popupwin';\nimport brickUrl from '../musique/brick.mp3';\nimport dunutsUrl from '../musique/donuts.mp3'; // import Malus from '../components/Malus'\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.movePad = () => {\n      document.addEventListener('touchstart', event => {\n        if (event.touches[0].pageX - this.padWidth / 2 > 2 && event.touches[0].pageX - this.padWidth / 2 < 373 - this.padWidth) this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        }); // if - else if : Compteur pour déplacer la balle avant de l'envoyer\n\n        if (!this.isBallMoving && this.counterBall === 1) {\n          this.isBallMoving = true;\n        } else if (!this.isBallMoving) {\n          this.counterBall++;\n        }\n      }, false);\n      document.addEventListener('touchmove', event => {\n        if (this.state.xLeft > 2 && this.state.xLeft < 373 - this.padWidth) {\n          this.setState({\n            xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n          });\n        }\n\n        if (this.state.xLeft <= 2) {\n          this.setState({\n            xLeft: 3\n          });\n        }\n\n        if (this.state.xLeft >= 373 - this.padWidth) {\n          this.setState({\n            xLeft: 372 - this.padWidth\n          });\n        }\n      }, false);\n    };\n\n    this.manageAudioBricks = () => {\n      this.brick.play();\n    };\n\n    this.manageAudioDunuts = () => {\n      this.dunuts.play();\n    };\n\n    this.deleteBricks = () => {\n      const newBrickWall = this.state.brickWall.filter(item => {\n        return !(this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 10 > item.left && this.state.pointLeft + 10 < item.left + 67);\n      });\n\n      if (newBrickWall.length < this.state.brickWall.length) {\n        this.manageAudioBricks();\n      }\n\n      this.setState({\n        brickWall: newBrickWall\n      });\n    };\n\n    this.getBonus = () => {\n      if (Math.ceil(Math.random() * 6) === 6 && this.padWidth === 100) {\n        const newDonutsTab = this.state.brickWall.filter(item => {\n          return this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67;\n        });\n        newDonutsTab.push(...this.state.bonus);\n        this.setState({\n          bonus: newDonutsTab\n        });\n      }\n    };\n\n    this.isBonusCollide = (top, left) => {\n      if (top > 472 && top <= 475 && left + 10 > this.state.xLeft && left - 10 < this.state.xLeft + this.padWidth) {\n        this.padWidth = 150;\n        this.manageAudioDunuts();\n        return true;\n      }\n    };\n\n    this.generateIfCollideX = (left, top) => {\n      return this.state.pointTop + 17 > top && this.state.pointTop < top + 17 && this.state.pointLeft + 10 > left && this.state.pointLeft + 10 < left + 67;\n    };\n\n    this.generateIfCollideY = (left, top) => {\n      return this.state.pointTop + 20 > top && this.state.pointTop < top + 20 && this.state.pointLeft + 7 > left && this.state.pointLeft + 7 < left + 64;\n    };\n\n    this.checkIfCollideX = () => {\n      return this.state.brickWall.find(item => {\n        return this.generateIfCollideX(item.left, item.top) === true;\n      });\n    };\n\n    this.checkIfCollideY = () => {\n      return this.state.brickWall.find(item => {\n        return this.generateIfCollideY(item.left, item.top) === true;\n      });\n    };\n\n    this.checkIfCollidePadY = () => {\n      return this.state.pointTop > 472 && this.state.pointTop < 474 && this.state.pointLeft + 10 > this.state.xLeft && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth;\n    };\n\n    this.moovingBall = () => {\n      const speed = 1.5;\n\n      if (this.isBallMoving) {\n        if (this.goRight) {\n          // eslint-disable-next-line \n          this.setState({\n            pointLeft: this.state.pointLeft += speed\n          });\n        } else if (!this.goRight) {\n          // eslint-disable-next-line \n          this.setState({\n            pointLeft: this.state.pointLeft -= speed\n          });\n        }\n\n        if (this.state.pointLeft > 355 || this.state.pointLeft < 0 || this.checkIfCollideX()) {\n          this.getBonus();\n          this.deleteBricks();\n          this.goRight = !this.goRight;\n        }\n\n        if (this.goDown) {\n          // eslint-disable-next-line \n          this.setState({\n            pointTop: this.state.pointTop += speed\n          });\n        } else if (!this.goDown) {\n          // eslint-disable-next-line \n          this.setState({\n            pointTop: this.state.pointTop -= speed\n          });\n        }\n\n        if (this.state.pointTop < 0 || this.checkIfCollideY() || this.checkIfCollidePadY()) {\n          this.getBonus();\n          this.deleteBricks();\n          this.goDown = !this.goDown;\n        }\n\n        if (this.state.pointTop > 587) {\n          this.isBallMoving = false;\n          this.goDown = false;\n          this.counterBall = 0;\n          this.goRight = true;\n          this.life = this.life - 1;\n        }\n      } else this.setState({\n        pointTop: 472,\n        pointLeft: this.state.xLeft - 10 + this.padWidth / 2\n      });\n\n      if (this.state.timer < 8) {\n        this.setState({\n          timer: this.state.timer + 1\n        });\n      } else {\n        this.setState({\n          timer: 0\n        });\n      }\n\n      this.padWidth === 150 && setTimeout(() => this.padWidth = 100, 6000);\n      setTimeout(this.moovingBall, this.interval);\n    };\n\n    this.getBrickWall = () => {\n      const brick = [];\n\n      for (let i = 0; i < 6; i++) {\n        for (let j = 0; j < 5; j++) {\n          brick.push({\n            top: i * 25,\n            left: j * 77\n          });\n        }\n      }\n\n      return brick;\n    };\n\n    this.MouvBartX = () => {\n      if (this.toRight) {\n        this.setState({\n          bartDepart: this.state.bartDepart + 5\n        });\n      } else {\n        this.setState({\n          bartDepart: this.state.bartDepart - 5\n        });\n      }\n\n      if (this.state.bartDepart > 375 - 35) this.toRight = false;else if (this.state.bartDepart < 35) {\n        this.toRight = true;\n      }\n      setTimeout(this.MouvBartX, 100);\n    };\n\n    this.getRestart = () => {\n      this.life = 3;\n      this.setState({\n        brickWall: this.getBrickWall(),\n        bonus: []\n      });\n    };\n\n    this.interval = 5;\n    this.goRight = true;\n    this.goDown = false;\n    this.isBallMoving = false;\n    this.counterBall = 0;\n    this.life = 3;\n    this.padWidth = 100;\n    this.state = {\n      bartDepart: 0,\n      // malusTop : -35,\n      // malusLeft : this.bartDepart,\n      pointLeft: 20,\n      pointTop: 400,\n      brickWall: this.getBrickWall(),\n      xLeft: 140,\n      bonus: [],\n      timer: 0,\n      isPlaying: false\n    };\n    this.brick = new Audio(brickUrl);\n    this.dunuts = new Audio(dunutsUrl);\n  }\n\n  componentDidMount() {\n    this.moovingBall();\n    this.movePad();\n    this.MouvBartX(); // this.falling()\n  }\n\n  componentWillUnmount() {\n    this.isBonusCollide();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.timer === 8 || this.state.pointLeft > 355 || this.state.pointLeft < 0 || this.checkIfCollideX() || this.state.pointTop < 0 || this.checkIfCollideY() || this.checkIfCollidePadY();\n  }\n\n  render() {\n    const _this$state = this.state,\n          pointLeft = _this$state.pointLeft,\n          pointTop = _this$state.pointTop,\n          xLeft = _this$state.xLeft,\n          bartDepart = _this$state.bartDepart;\n    return React.createElement(\"div\", {\n      className: \"Game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, this.life === 0 && React.createElement(Popuploose, {\n      restart: this.getRestart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), this.state.brickWall.length === 0 && React.createElement(Popupwin, {\n      restart: this.getRestart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"lifeBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.life >= 3 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.life >= 2 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.life >= 1 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        position: 'relative',\n        height: '600px',\n        width: '375',\n        top: '67px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(MoveBart, {\n      left: bartDepart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), this.state.brickWall.map(item => {\n      return React.createElement(Bricks, {\n        top: item.top,\n        left: item.left,\n        key: item.top + '-' + item.left,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      });\n    }), this.state.bonus.map(item => {\n      return React.createElement(Bonus, {\n        top: item.top,\n        left: item.left + 10,\n        key: item.top + '-' + item.left,\n        callback: this.isBonusCollide,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      });\n    }), React.createElement(Point, {\n      left: pointLeft,\n      top: pointTop,\n      move: this.isBallMoving,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(Pad, {\n      left: xLeft,\n      width: this.padWidth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/home/administrateur/Projet/lyon-0919-react-p2-brick-breaker/src/pages/Game.js"],"names":["React","Component","Point","Bricks","Pad","Bonus","MoveBart","Popuploose","Popupwin","brickUrl","dunutsUrl","Game","constructor","props","movePad","document","addEventListener","event","touches","pageX","padWidth","setState","xLeft","Math","ceil","isBallMoving","counterBall","state","manageAudioBricks","brick","play","manageAudioDunuts","dunuts","deleteBricks","newBrickWall","brickWall","filter","item","pointTop","top","pointLeft","left","length","getBonus","random","newDonutsTab","push","bonus","isBonusCollide","generateIfCollideX","generateIfCollideY","checkIfCollideX","find","checkIfCollideY","checkIfCollidePadY","moovingBall","speed","goRight","goDown","life","timer","setTimeout","interval","getBrickWall","i","j","MouvBartX","toRight","bartDepart","getRestart","isPlaying","Audio","componentDidMount","componentWillUnmount","shouldComponentUpdate","nextProps","nextState","render","position","height","width","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Game.css';\nimport Point from '../components/Point';\nimport Bricks from '../components/Bricks';\nimport Pad from '../components/Pad';\nimport Bonus from '../components/Bonus';\nimport MoveBart from '../components/MoveBart'\nimport Popuploose from '../components/Popuploose';\nimport Popupwin from '../components/Popupwin';\nimport brickUrl from '../musique/brick.mp3'\nimport dunutsUrl from '../musique/donuts.mp3'\n// import Malus from '../components/Malus'\n\n\nclass Game extends Component {\n  constructor(props) {\n    super(props)\n    this.interval = 5;\n    this.goRight = true;\n    this.goDown = false;\n    this.isBallMoving = false;\n    this.counterBall = 0;\n    this.life = 3;\n    this.padWidth = 100;\n    this.state = {\n      bartDepart: 0,\n      // malusTop : -35,\n      // malusLeft : this.bartDepart,\n      pointLeft: 20,\n      pointTop: 400,\n      brickWall: this.getBrickWall(),\n      xLeft: 140,\n      bonus: [],\n      timer: 0,\n      isPlaying: false,\n\n    }\n    this.brick = new Audio(brickUrl);\n    this.dunuts = new Audio(dunutsUrl);\n  }\n\n  movePad = () => {\n    document.addEventListener('touchstart', event => {\n      if ((event.touches[0].pageX - this.padWidth / 2 > 2) && (event.touches[0].pageX - this.padWidth / 2 < 373 - this.padWidth))\n        this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        })\n      // if - else if : Compteur pour déplacer la balle avant de l'envoyer\n      if (!this.isBallMoving && this.counterBall === 1) {\n        this.isBallMoving = true\n      } else if (!this.isBallMoving) {\n        this.counterBall++\n      }\n    }, false);\n    document.addEventListener('touchmove', event => {\n      if ((this.state.xLeft > 2) && (this.state.xLeft < 373 - this.padWidth)) {\n        this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        })\n      }\n      if (this.state.xLeft <= 2) {\n        this.setState({\n          xLeft: 3 \n        })\n      }\n      if (this.state.xLeft >= 373 - this.padWidth) {\n        this.setState({\n          xLeft: 372 - this.padWidth\n        })\n      }\n    }, false);\n\n  }\n\n  manageAudioBricks = () => {\n    this.brick.play()\n}\nmanageAudioDunuts = () => {\n  this.dunuts.play()\n}\n\n  deleteBricks = () => {\n    const newBrickWall = this.state.brickWall\n      .filter(item => {\n        return !(this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 10 > item.left && this.state.pointLeft +10 < item.left + 67)\n      })\n     if(newBrickWall.length < this.state.brickWall.length){\n      this.manageAudioBricks()\n     }\n    this.setState({\n      brickWall: newBrickWall\n    })\n\n  }\n\n  getBonus = () => {\n    if ((Math.ceil(Math.random() * 6) === 6) && (this.padWidth===100)) {\n      const newDonutsTab = this.state.brickWall\n        .filter(item => {\n          return (this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67)\n        })\n      newDonutsTab.push(...this.state.bonus)\n      this.setState({ bonus: newDonutsTab })\n    }\n  }\n\n  isBonusCollide = (top, left) => {\n    if (top > 472\n      && top <= 475\n      && left + 10 > this.state.xLeft\n      && left - 10 < this.state.xLeft + this.padWidth) {\n        this.padWidth=150;\n        this.manageAudioDunuts()\n        return true\n    }\n  }\n\n  generateIfCollideX = (left, top) => {\n\n    return (this.state.pointTop + 17 > top && this.state.pointTop < top + 17 && this.state.pointLeft + 10 > left && this.state.pointLeft +10 < left + 67)\n  }\n\n  generateIfCollideY = (left, top) => {\n    return (this.state.pointTop + 20 > top && this.state.pointTop < top + 20 && this.state.pointLeft + 7 > left && this.state.pointLeft +7 < left + 64)\n  }\n\n  checkIfCollideX = () => {\n    return (this.state.brickWall\n      .find(item => {\n        return this.generateIfCollideX(item.left, item.top) === true\n      }))\n  }\n\n  checkIfCollideY = () => {\n    return (this.state.brickWall\n      .find(item => {\n        return this.generateIfCollideY(item.left, item.top) === true\n      }))\n  }\n\n  checkIfCollidePadY = () => {\n    return (this.state.pointTop > 472\n      && this.state.pointTop < 474\n      && this.state.pointLeft + 10 > this.state.xLeft\n      && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth)\n  }\n\n  moovingBall = () => {\n    const speed = 1.5\n    if (this.isBallMoving) {\n      if (this.goRight) {\n        // eslint-disable-next-line \n        this.setState({ pointLeft: this.state.pointLeft += speed })\n      } else if (!this.goRight) {\n        // eslint-disable-next-line \n        this.setState({ pointLeft: this.state.pointLeft -= speed })\n      }\n      if (this.state.pointLeft > 355 || this.state.pointLeft < 0 || this.checkIfCollideX()\n      ) {\n        this.getBonus()\n        this.deleteBricks()\n        this.goRight = !this.goRight\n      }\n      if (this.goDown) {\n        // eslint-disable-next-line \n        this.setState({ pointTop: this.state.pointTop += speed })\n      } else if (!this.goDown) {\n        // eslint-disable-next-line \n        this.setState({ pointTop: this.state.pointTop -= speed })\n      }\n      if (this.state.pointTop < 0 || this.checkIfCollideY() || this.checkIfCollidePadY()\n      ) {\n        this.getBonus()\n        this.deleteBricks()\n        this.goDown = !this.goDown\n      }\n      if (this.state.pointTop > 587) {\n        this.isBallMoving = false\n        this.goDown = false\n        this.counterBall = 0\n        this.goRight = true\n        this.life = this.life - 1\n      }\n    } else this.setState({ pointTop: 472, pointLeft: this.state.xLeft - 10 + this.padWidth / 2 })\n\n    if (this.state.timer < 8) {\n      this.setState({ timer: this.state.timer + 1 })\n    } else {\n      this.setState({ timer: 0 })\n    }\n\n    this.padWidth === 150 && setTimeout(()=>this.padWidth=100, 6000)\n\n    setTimeout(this.moovingBall, this.interval)\n  }\n\n  getBrickWall = () => {\n    const brick = [];\n    for (let i = 0; i < 6; i++) {\n      for (let j = 0; j < 5; j++) {\n        brick.push({ top: i * 25, left: j * 77 })\n      }\n    }\n    return brick;\n  };\n\n  MouvBartX = () => {\n    if (this.toRight) {\n      this.setState({ bartDepart: this.state.bartDepart + 5 })\n    } else {\n      this.setState({ bartDepart: this.state.bartDepart - 5 })\n    }\n    if (this.state.bartDepart > 375 -35)\n      this.toRight = false;\n\n    else if (this.state.bartDepart < 35) {\n      this.toRight = true\n    }\n    setTimeout(this.MouvBartX, 100)\n  }\n\n\n  getRestart = () => {\n    this.life = 3\n    this.setState({brickWall:this.getBrickWall(), bonus:[]})\n  }\n\n  componentDidMount() {\n    this.moovingBall()\n    this.movePad()\n    this.MouvBartX()\n    // this.falling()\n  }\n\n  componentWillUnmount(){\n    this.isBonusCollide()\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.timer === 8 || this.state.pointLeft > 355 || this.state.pointLeft < 0 || this.checkIfCollideX() || this.state.pointTop < 0 || this.checkIfCollideY() || this.checkIfCollidePadY();\n  }\n\n  render() {\n    const { pointLeft, pointTop, xLeft, bartDepart } = this.state\n    return (\n      <div className=\"Game\">\n       {this.life===0 && <Popuploose restart={this.getRestart}/>}\n       {this.state.brickWall.length===0 && <Popupwin restart={this.getRestart}/>}\n        <div className=\"lifeBar\">\n          <div className={this.life >= 3 ? \"life\" : \"noLife\"}></div>\n          <div className={this.life >= 2 ? \"life\" : \"noLife\"}></div>\n          <div className={this.life >= 1 ? \"life\" : \"noLife\"}></div>\n        </div>\n        <div style={{ position: 'relative', height: '600px', width: '375', top: '67px' }}>\n          <MoveBart left={bartDepart} />\n          {/* <Malus \n          left = {malusLeft} \n          top = {malusTop}/> */}\n          {this.state.brickWall.map(item => {\n            return (\n              <Bricks\n                top={item.top}\n                left={item.left}\n                key={item.top + '-' + item.left}\n              />\n            );\n          })}\n          {this.state.bonus.map(item => {\n            return (\n              <Bonus\n                top={item.top}\n                left={item.left + 10}\n                key={item.top + '-' + item.left}\n                callback={this.isBonusCollide} />\n            )\n          }\n          )}\n          <Point left={pointLeft} top={pointTop} move={this.isBallMoving} />\n          {/* <div style={{width: `${this.padWidth}px` , zIndex:'1000', position:'absolute', top:'492px', left:`${xLeft}px`, border: '2px red solid'}}></div> */}\n          <Pad left={xLeft} width={this.padWidth} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}