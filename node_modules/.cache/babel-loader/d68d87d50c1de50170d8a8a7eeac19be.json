{"ast":null,"code":"var _jsxFileName = \"/home/administrateur/Projet/lyon-0919-react-p2-brick-breaker/src/pages/Game.js\";\nimport React, { Component } from 'react';\nimport './Game.css';\nimport Point from '../components/Point';\nimport Bricks from '../components/Bricks';\nimport Pad from '../components/Pad';\nimport Bonus from '../components/Bonus';\nimport MoveBart from '../components/MoveBart';\nimport Popuploose from '../components/Popuploose';\nimport Popupwin from '../components/Popupwin';\nimport Countdown from '../components/Countdown';\nimport brickUrl from '../musique/brick.mp3';\nimport Malus from '../components/Malus';\nimport dunutsUrl from '../musique/donuts.mp3';\nimport dohUrl from '../musique/doh.mp3';\nimport FallingBart from '../components/FallingBart';\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPause = () => {\n      if (!this.state.pause) {\n        this.setState({\n          pause: true\n        });\n        clearTimeout(this.bartTimeOut);\n        clearTimeout(this.balleTimeOut);\n        clearTimeout(this.malusTimeOut);\n        clearTimeout(this.timerTimeOut);\n        console.log(\"pause = \".concat(this.state.pause));\n      } else {\n        this.setState({\n          pause: fal\n        });\n        setTimeout(this.MouvBartX);\n        setTimeout(this.moovingBall);\n        setTimeout(this.getMalus);\n        setTimeout(this.countDown);\n        console.log(\"pause = \".concat(this.state.pause));\n      }\n    };\n\n    this.movePad = () => {\n      document.addEventListener('touchstart', event => {\n        if (event.touches[0].pageX - this.padWidth / 2 > 2 && event.touches[0].pageX - this.padWidth / 2 < 373 - this.padWidth) this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        }); // if - else if : Compteur pour déplacer la balle avant de l'envoyer\n\n        if (!this.isBallMoving && this.counterBall === 1) {\n          this.isBallMoving = true;\n        } else if (!this.isBallMoving) {\n          this.counterBall++;\n        }\n      }, false);\n      document.addEventListener('touchmove', event => {\n        if (this.state.xLeft > 2 && this.state.xLeft < 373 - this.padWidth) {\n          this.setState({\n            xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n          });\n        }\n\n        if (this.state.xLeft <= 2) {\n          this.setState({\n            xLeft: 3\n          });\n        }\n\n        if (this.state.xLeft >= 373 - this.padWidth) {\n          this.setState({\n            xLeft: 372 - this.padWidth\n          });\n        }\n      }, false);\n    };\n\n    this.manageAudioBricks = () => {\n      this.brick.play();\n    };\n\n    this.manageAudioDunuts = () => {\n      this.dunuts.play();\n    };\n\n    this.manageAudioDoh = () => {\n      this.doh.play();\n    };\n\n    this.deleteBricks = () => {\n      const newBrickWall = this.state.brickWall.filter(item => {\n        return !(this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67);\n      });\n\n      if (newBrickWall.length < this.state.brickWall.length) {\n        this.manageAudioBricks();\n      }\n\n      this.setState({\n        brickWall: newBrickWall\n      });\n    };\n\n    this.getBonus = () => {\n      if (Math.ceil(Math.random() * 8) === 8 && this.padWidth === 100) {\n        const newDonutsTab = this.state.brickWall.find(item => {\n          return this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67;\n        });\n        this.setState({\n          bonus: [...this.state.bonus, newDonutsTab]\n        });\n      }\n    };\n\n    this.isBonusCollide = (top, left) => {\n      if (top > 472 && top <= 475 && left + 10 > this.state.xLeft && left - 10 < this.state.xLeft + this.padWidth) {\n        this.padWidth = 150;\n        this.manageAudioDunuts();\n        return true;\n      }\n    };\n\n    this.getMalus = () => {\n      if (!this.malusOn) {\n        //On change l'état au bout d'un temps random puis on rappelle la fonction. \n        this.malusTimeOut = setTimeout(() => {\n          this.setState({\n            malus: [...this.state.malus, this.state.bartDepart]\n          });\n          this.getMalus();\n        }, Math.floor(Math.random() * (10000 - 5000 + 1)) + 5000);\n      }\n    };\n\n    this.isMalusCollide = (top, left) => {\n      if (top > 472 && top <= 475 && left + 10 > this.state.xLeft && left - 10 < this.state.xLeft + this.padWidth) {\n        this.malusOn = true;\n        this.manageAudioDoh();\n        return true;\n      }\n    };\n\n    this.isBartCollide = (top, left) => {\n      if (top > 472 && top <= 475 && left + 10 > this.state.xLeft && left - 10 < this.state.xLeft + this.padWidth) {\n        this.win = true;\n        return true;\n      }\n    };\n\n    this.isBartDontCollide = () => {\n      this.loose = true;\n    };\n\n    this.generateIfCollideX = (left, top) => {\n      // 10 correspond à la moitié de la balle, 2.5 à la moitié du espace vertical, 5 à la moitié d'un espace horizontal\n      return this.state.pointTop + 10 > top - 2.5 && this.state.pointTop + 10 < top + 22.5 && this.state.pointLeft + 20 > left && this.state.pointLeft < left + 67;\n    };\n\n    this.generateIfCollideY = (left, top) => {\n      return this.state.pointTop + 20 > top && this.state.pointTop < top + 20 && this.state.pointLeft + 10 > left - 5 && this.state.pointLeft + 10 < left + 67 + 5;\n    };\n\n    this.checkIfCollideX = () => {\n      return this.state.brickWall.find(item => {\n        return this.generateIfCollideX(item.left, item.top) === true;\n      });\n    };\n\n    this.checkIfCollideY = () => {\n      return this.state.brickWall.find(item => {\n        return this.generateIfCollideY(item.left, item.top) === true;\n      });\n    };\n\n    this.checkIfCollidePadY = () => {\n      if (this.state.pointTop > 472 && this.state.pointTop < 474) {\n        if (this.state.pointLeft + 10 > this.state.xLeft + this.padWidth * 0 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.1) {\n          this.goRight = true;\n          this.speedX = -1.5;\n          this.speedY = 1.5;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.1 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.3) {\n          this.goRight = true;\n          this.speedX = -1;\n          this.speedY = 2;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.30 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.45) {\n          this.goRight = true;\n          this.speedX = -0.5;\n          this.speedY = 2.5;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.45 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.55) {\n          this.goRight = true;\n          this.speedX = 0;\n          this.speedY = 3;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.55 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.70) {\n          this.goRight = true;\n          this.speedX = 0.5;\n          this.speedY = 2.5;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.70 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 0.90) {\n          this.goRight = true;\n          this.speedX = 1;\n          this.speedY = 2;\n        } else if (this.state.pointLeft + 10 >= this.state.xLeft + this.padWidth * 0.90 && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth * 1) {\n          this.goRight = true;\n          this.speedX = 1.5;\n          this.speedY = 1.5;\n        }\n      }\n\n      return this.state.pointTop > 472 && this.state.pointTop < 474 && this.state.pointLeft + 10 > this.state.xLeft && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth;\n    };\n\n    this.moovingBall = () => {\n      if (this.isBallMoving) {\n        this.setState(this.goRight ? {\n          pointLeft: this.state.pointLeft + this.speedX\n        } : {\n          pointLeft: this.state.pointLeft - this.speedX\n        });\n\n        if (this.state.pointLeft > 355 || this.state.pointLeft < 0) {\n          this.goRight = !this.goRight;\n        } else if (this.checkIfCollideX()) {\n          this.getBonus();\n          this.deleteBricks();\n          this.goRight = !this.goRight;\n        }\n\n        this.setState(this.goDown ? {\n          pointTop: this.state.pointTop + this.speedY\n        } : {\n          pointTop: this.state.pointTop - this.speedY\n        });\n\n        if (this.state.pointTop < 0 || this.checkIfCollidePadY()) {\n          this.goDown = !this.goDown;\n        } else if (this.checkIfCollideY()) {\n          this.getBonus();\n          this.deleteBricks();\n          this.goDown = !this.goDown;\n        }\n\n        if (this.state.pointTop > 587) {\n          this.isBallMoving = false;\n          this.goDown = false;\n          this.counterBall = 0;\n          this.goRight = true;\n          this.life = this.life - 1;\n        }\n      } else {\n        this.setState({\n          pointTop: 472,\n          pointLeft: this.state.xLeft - 10 + this.padWidth / 2\n        });\n        this.speedX = 1.5;\n        this.speedY = 1.5;\n      }\n\n      if (this.state.timer < 8) {\n        this.setState({\n          timer: this.state.timer + 1\n        });\n      } else {\n        this.setState({\n          timer: 0\n        });\n      }\n\n      this.padWidth === 150 && setTimeout(() => this.padWidth = 100, 6000);\n      this.malusOn && setTimeout(() => this.malusOn = false, 6000);\n      this.state.brickWall.length === 0 && clearTimeout(this.malusTimeOut);\n      this.balleTimeOut = setTimeout(this.moovingBall, this.interval);\n    };\n\n    this.getBrickWall = () => {\n      const brick = []; // for (let i = 0; i < 6; i++) {\n      //   for (let j = 0; j < 5; j++) {\n      //     brick.push({ top: i * 25, left: j * 77 })\n      //   }\n      // }\n\n      brick.push({\n        top: 0,\n        left: 0\n      });\n      return brick;\n    };\n\n    this.MouvBartX = () => {\n      if (this.bartGoRight) {\n        this.setState({\n          bartDepart: this.state.bartDepart + 5\n        });\n      } else {\n        this.setState({\n          bartDepart: this.state.bartDepart - 5\n        });\n      }\n\n      if (this.state.bartDepart > 375 - 35) this.bartGoRight = false;else if (this.state.bartDepart < 35) {\n        this.bartGoRight = true;\n      }\n      this.bartTimeOut = setTimeout(this.MouvBartX, 100);\n    };\n\n    this.getRestart = () => {\n      this.life = 3;\n      this.win = false;\n      this.setState({\n        brickWall: this.getBrickWall(),\n        bonus: [],\n        time: 61\n      });\n    };\n\n    this.countDown = () => {\n      if (this.props.counter === true) {\n        if (this.state.time > 0) {\n          this.setState({\n            time: this.state.time - 1\n          });\n        }\n\n        if (this.state.time <= 9) {\n          this.setState({\n            color: \"red\"\n          });\n        }\n\n        if (this.state.time === 0) {}\n\n        this.timerTimeOut = setTimeout(this.countDown, 1000);\n      }\n    };\n\n    this.interval = 5;\n    this.bartGoRight = true;\n    this.goRight = true;\n    this.goDown = false;\n    this.isBallMoving = false;\n    this.counterBall = 0;\n    this.life = 3;\n    this.padWidth = 100;\n    this.malusOn = false;\n    this.speedX = 1.5;\n    this.speedY = 1.5;\n    this.win = false;\n    this.loose = false;\n    this.malusTimeOut = '';\n    this.balleTimeOut = '';\n    this.bartTimeOut = '';\n    this.timerTimeOut = '';\n    this.state = {\n      bartDepart: 0,\n      pointLeft: 20,\n      pointTop: 400,\n      brickWall: this.getBrickWall(),\n      xLeft: 140,\n      bonus: [],\n      malus: [],\n      timer: 0,\n      isPlaying: false,\n      time: 61,\n      color: 'white',\n      pause: false\n    };\n    this.brick = new Audio(brickUrl);\n    this.dunuts = new Audio(dunutsUrl);\n    this.doh = new Audio(dohUrl);\n  }\n\n  componentDidMount() {\n    this.moovingBall();\n    this.movePad();\n    this.MouvBartX();\n    this.countDown();\n    this.getMalus();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.timer === 8 || this.state.pointLeft > 355 || this.state.pointLeft < 0;\n  }\n\n  render() {\n    const _this$state = this.state,\n          pointLeft = _this$state.pointLeft,\n          pointTop = _this$state.pointTop,\n          xLeft = _this$state.xLeft,\n          bartDepart = _this$state.bartDepart,\n          brickWall = _this$state.brickWall;\n    return React.createElement(\"div\", {\n      className: \"Game\",\n      style: {\n        transform: this.malusOn ? 'scale(0.85) scaleX(-1)' : 'scale(0.85)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, (this.life === 0 || this.state.time === 0 || this.loose === true) && React.createElement(Popuploose, {\n      restart: this.getRestart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }), this.win && React.createElement(Popupwin, {\n      restart: this.getRestart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"lifeBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.life >= 3 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.life >= 2 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: this.life >= 1 ? \"life\" : \"noLife\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: this.getPause,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, \"Pause\"), this.props.counter === true && React.createElement(Countdown, {\n      time: this.state.time,\n      color: this.state.color,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      style: {\n        position: 'relative',\n        height: '600px',\n        width: '375',\n        top: '67px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(MoveBart, {\n      left: bartDepart,\n      bartGoRight: this.bartGoRight,\n      endGame: brickWall,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }), this.state.brickWall.map(item => {\n      return React.createElement(Bricks, {\n        top: item.top,\n        left: item.left,\n        key: item.top + '-' + item.left,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      });\n    }), this.state.bonus.map(item => {\n      return React.createElement(Bonus, {\n        top: item.top,\n        left: item.left + 10,\n        key: item.top + '-' + item.left,\n        callback: this.isBonusCollide,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      });\n    }), this.state.malus.map(item => {\n      return React.createElement(Malus, {\n        pause: this.state.pause,\n        left: item,\n        key: item,\n        isMalusCollide: this.isMalusCollide,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      });\n    }), this.state.brickWall.length === 0 && React.createElement(FallingBart, {\n      left: this.state.bartDepart,\n      isBartCollide: this.isBartCollide,\n      isBartDontCollide: this.isBartDontCollide,\n      pause: this.state.pause,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }), React.createElement(Point, {\n      left: pointLeft,\n      top: pointTop,\n      move: this.isBallMoving,\n      brick: brickWall,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431\n      },\n      __self: this\n    }), React.createElement(Pad, {\n      left: xLeft,\n      width: this.padWidth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/home/administrateur/Projet/lyon-0919-react-p2-brick-breaker/src/pages/Game.js"],"names":["React","Component","Point","Bricks","Pad","Bonus","MoveBart","Popuploose","Popupwin","Countdown","brickUrl","Malus","dunutsUrl","dohUrl","FallingBart","Game","constructor","props","getPause","state","pause","setState","clearTimeout","bartTimeOut","balleTimeOut","malusTimeOut","timerTimeOut","console","log","fal","setTimeout","MouvBartX","moovingBall","getMalus","countDown","movePad","document","addEventListener","event","touches","pageX","padWidth","xLeft","Math","ceil","isBallMoving","counterBall","manageAudioBricks","brick","play","manageAudioDunuts","dunuts","manageAudioDoh","doh","deleteBricks","newBrickWall","brickWall","filter","item","pointTop","top","pointLeft","left","length","getBonus","random","newDonutsTab","find","bonus","isBonusCollide","malusOn","malus","bartDepart","floor","isMalusCollide","isBartCollide","win","isBartDontCollide","loose","generateIfCollideX","generateIfCollideY","checkIfCollideX","checkIfCollideY","checkIfCollidePadY","goRight","speedX","speedY","goDown","life","timer","interval","getBrickWall","push","bartGoRight","getRestart","time","counter","color","isPlaying","Audio","componentDidMount","shouldComponentUpdate","nextProps","nextState","render","transform","position","height","width","map"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;AAEA,MAAMC,IAAN,SAAmBd,SAAnB,CAA6B;AAC3Be,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAsCnBC,QAtCmB,GAsCR,MAAM;AACf,UAAI,CAAC,KAAKC,KAAL,CAAWC,KAAhB,EAAuB;AACrB,aAAKC,QAAL,CAAc;AACVD,UAAAA,KAAK,EAAE;AADG,SAAd;AAGAE,QAAAA,YAAY,CAAC,KAAKC,WAAN,CAAZ;AACAD,QAAAA,YAAY,CAAC,KAAKE,YAAN,CAAZ;AACAF,QAAAA,YAAY,CAAC,KAAKG,YAAN,CAAZ;AACAH,QAAAA,YAAY,CAAC,KAAKI,YAAN,CAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,mBAAuB,KAAKT,KAAL,CAAWC,KAAlC;AACD,OATD,MASO;AACL,aAAKC,QAAL,CAAc;AACZD,UAAAA,KAAK,EAAES;AADK,SAAd;AAGAC,QAAAA,UAAU,CAAC,KAAKC,SAAN,CAAV;AACAD,QAAAA,UAAU,CAAC,KAAKE,WAAN,CAAV;AACAF,QAAAA,UAAU,CAAC,KAAKG,QAAN,CAAV;AACAH,QAAAA,UAAU,CAAC,KAAKI,SAAN,CAAV;AACAP,QAAAA,OAAO,CAACC,GAAR,mBAAuB,KAAKT,KAAL,CAAWC,KAAlC;AACD;AACF,KA1DkB;;AAAA,SA4DnBe,OA5DmB,GA4DT,MAAM;AACdC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,EAAwCC,KAAK,IAAI;AAC/C,YAAKA,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyB,KAAKC,QAAL,GAAgB,CAAzC,GAA6C,CAA9C,IAAqDH,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyB,KAAKC,QAAL,GAAgB,CAAzC,GAA6C,MAAM,KAAKA,QAAjH,EACE,KAAKpB,QAAL,CAAc;AACZqB,UAAAA,KAAK,EAAEC,IAAI,CAACC,IAAL,CAAUN,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyB,KAAKC,QAAL,GAAgB,CAAnD;AADK,SAAd,EAF6C,CAK/C;;AACA,YAAI,CAAC,KAAKI,YAAN,IAAsB,KAAKC,WAAL,KAAqB,CAA/C,EAAkD;AAChD,eAAKD,YAAL,GAAoB,IAApB;AACD,SAFD,MAEO,IAAI,CAAC,KAAKA,YAAV,EAAwB;AAC7B,eAAKC,WAAL;AACD;AACF,OAXD,EAWG,KAXH;AAYAV,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCC,KAAK,IAAI;AAC9C,YAAK,KAAKnB,KAAL,CAAWuB,KAAX,GAAmB,CAApB,IAA2B,KAAKvB,KAAL,CAAWuB,KAAX,GAAmB,MAAM,KAAKD,QAA7D,EAAwE;AACtE,eAAKpB,QAAL,CAAc;AACZqB,YAAAA,KAAK,EAAEC,IAAI,CAACC,IAAL,CAAUN,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyB,KAAKC,QAAL,GAAgB,CAAnD;AADK,WAAd;AAGD;;AACD,YAAI,KAAKtB,KAAL,CAAWuB,KAAX,IAAoB,CAAxB,EAA2B;AACzB,eAAKrB,QAAL,CAAc;AACZqB,YAAAA,KAAK,EAAE;AADK,WAAd;AAGD;;AACD,YAAI,KAAKvB,KAAL,CAAWuB,KAAX,IAAoB,MAAM,KAAKD,QAAnC,EAA6C;AAC3C,eAAKpB,QAAL,CAAc;AACZqB,YAAAA,KAAK,EAAE,MAAM,KAAKD;AADN,WAAd;AAGD;AACF,OAhBD,EAgBG,KAhBH;AAkBD,KA3FkB;;AAAA,SA6FnBM,iBA7FmB,GA6FC,MAAM;AACxB,WAAKC,KAAL,CAAWC,IAAX;AACD,KA/FkB;;AAAA,SAiGnBC,iBAjGmB,GAiGC,MAAM;AACxB,WAAKC,MAAL,CAAYF,IAAZ;AACD,KAnGkB;;AAAA,SAqGnBG,cArGmB,GAqGF,MAAM;AACrB,WAAKC,GAAL,CAASJ,IAAT;AACD,KAvGkB;;AAAA,SAyGnBK,YAzGmB,GAyGJ,MAAM;AACnB,YAAMC,YAAY,GAAG,KAAKpC,KAAL,CAAWqC,SAAX,CAClBC,MADkB,CACXC,IAAI,IAAI;AACd,eAAO,EAAE,KAAKvC,KAAL,CAAWwC,QAAX,GAAsB,EAAtB,GAA2BD,IAAI,CAACE,GAAhC,IAAuC,KAAKzC,KAAL,CAAWwC,QAAX,GAAsBD,IAAI,CAACE,GAAL,GAAW,EAAxE,IAA8E,KAAKzC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4BH,IAAI,CAACI,IAA/G,IAAuH,KAAK3C,KAAL,CAAW0C,SAAX,GAAuBH,IAAI,CAACI,IAAL,GAAY,EAA5J,CAAP;AACD,OAHkB,CAArB;;AAIA,UAAIP,YAAY,CAACQ,MAAb,GAAsB,KAAK5C,KAAL,CAAWqC,SAAX,CAAqBO,MAA/C,EAAuD;AACrD,aAAKhB,iBAAL;AACD;;AACD,WAAK1B,QAAL,CAAc;AACZmC,QAAAA,SAAS,EAAED;AADC,OAAd;AAID,KArHkB;;AAAA,SAuHnBS,QAvHmB,GAuHR,MAAM;AACf,UAAKrB,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACsB,MAAL,KAAgB,CAA1B,MAAiC,CAAlC,IAAyC,KAAKxB,QAAL,KAAkB,GAA/D,EAAqE;AACnE,cAAMyB,YAAY,GAAG,KAAK/C,KAAL,CAAWqC,SAAX,CAClBW,IADkB,CACbT,IAAI,IAAI;AACZ,iBAAQ,KAAKvC,KAAL,CAAWwC,QAAX,GAAsB,EAAtB,GAA2BD,IAAI,CAACE,GAAhC,IAAuC,KAAKzC,KAAL,CAAWwC,QAAX,GAAsBD,IAAI,CAACE,GAAL,GAAW,EAAxE,IAA8E,KAAKzC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4BH,IAAI,CAACI,IAA/G,IAAuH,KAAK3C,KAAL,CAAW0C,SAAX,GAAuBH,IAAI,CAACI,IAAL,GAAY,EAAlK;AACD,SAHkB,CAArB;AAIA,aAAKzC,QAAL,CAAc;AAAE+C,UAAAA,KAAK,EAAE,CAAC,GAAG,KAAKjD,KAAL,CAAWiD,KAAf,EAAsBF,YAAtB;AAAT,SAAd;AACD;AACF,KA/HkB;;AAAA,SAiInBG,cAjImB,GAiIF,CAACT,GAAD,EAAME,IAAN,KAAe;AAC9B,UAAIF,GAAG,GAAG,GAAN,IACCA,GAAG,IAAI,GADR,IAECE,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAFxB,IAGCoB,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAHzC,EAGmD;AACjD,aAAKA,QAAL,GAAgB,GAAhB;AACA,aAAKS,iBAAL;AACA,eAAO,IAAP;AACD;AACF,KA1IkB;;AAAA,SA4InBjB,QA5ImB,GA4IR,MAAM;AACf,UAAI,CAAC,KAAKqC,OAAV,EAAmB;AACjB;AACA,aAAK7C,YAAL,GAAoBK,UAAU,CAAC,MAAM;AACnC,eAAKT,QAAL,CAAc;AACZkD,YAAAA,KAAK,EAAE,CAAC,GAAG,KAAKpD,KAAL,CAAWoD,KAAf,EAAsB,KAAKpD,KAAL,CAAWqD,UAAjC;AADK,WAAd;AAGA,eAAKvC,QAAL;AACD,SAL6B,EAK3BU,IAAI,CAAC8B,KAAL,CAAW9B,IAAI,CAACsB,MAAL,MAAiB,QAAQ,IAAR,GAAe,CAAhC,CAAX,IAAiD,IALtB,CAA9B;AAMD;AACF,KAtJkB;;AAAA,SAwJnBS,cAxJmB,GAwJF,CAACd,GAAD,EAAME,IAAN,KAAe;AAC9B,UAAIF,GAAG,GAAG,GAAN,IACCA,GAAG,IAAI,GADR,IAECE,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAFxB,IAGCoB,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAHzC,EAGmD;AACjD,aAAK6B,OAAL,GAAe,IAAf;AACA,aAAKlB,cAAL;AACA,eAAO,IAAP;AACD;AACF,KAjKkB;;AAAA,SAmKnBuB,aAnKmB,GAmKH,CAACf,GAAD,EAAME,IAAN,KAAe;AAC7B,UAAIF,GAAG,GAAG,GAAN,IACCA,GAAG,IAAI,GADR,IAECE,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAFxB,IAGCoB,IAAI,GAAG,EAAP,GAAY,KAAK3C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAHzC,EAGmD;AACjD,aAAKmC,GAAL,GAAW,IAAX;AACA,eAAO,IAAP;AACD;AACF,KA3KkB;;AAAA,SA6KnBC,iBA7KmB,GA6KC,MAAM;AACxB,WAAKC,KAAL,GAAa,IAAb;AACD,KA/KkB;;AAAA,SAiLnBC,kBAjLmB,GAiLE,CAACjB,IAAD,EAAOF,GAAP,KAAe;AAClC;AACA,aAAQ,KAAKzC,KAAL,CAAWwC,QAAX,GAAsB,EAAtB,GAA2BC,GAAG,GAAG,GAAjC,IAAwC,KAAKzC,KAAL,CAAWwC,QAAX,GAAsB,EAAtB,GAA2BC,GAAG,GAAG,IAAzE,IAAiF,KAAKzC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4BC,IAA7G,IAAqH,KAAK3C,KAAL,CAAW0C,SAAX,GAAuBC,IAAI,GAAG,EAA3J;AACD,KApLkB;;AAAA,SAsLnBkB,kBAtLmB,GAsLE,CAAClB,IAAD,EAAOF,GAAP,KAAe;AAClC,aAAQ,KAAKzC,KAAL,CAAWwC,QAAX,GAAsB,EAAtB,GAA2BC,GAA3B,IAAkC,KAAKzC,KAAL,CAAWwC,QAAX,GAAsBC,GAAG,GAAG,EAA9D,IAAoE,KAAKzC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4BC,IAAI,GAAG,CAAvG,IAA4G,KAAK3C,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4BC,IAAI,GAAG,EAAP,GAAY,CAA5J;AACD,KAxLkB;;AAAA,SA0LnBmB,eA1LmB,GA0LD,MAAM;AACtB,aAAQ,KAAK9D,KAAL,CAAWqC,SAAX,CACLW,IADK,CACAT,IAAI,IAAI;AACZ,eAAO,KAAKqB,kBAAL,CAAwBrB,IAAI,CAACI,IAA7B,EAAmCJ,IAAI,CAACE,GAAxC,MAAiD,IAAxD;AACD,OAHK,CAAR;AAID,KA/LkB;;AAAA,SAiMnBsB,eAjMmB,GAiMD,MAAM;AACtB,aAAQ,KAAK/D,KAAL,CAAWqC,SAAX,CACLW,IADK,CACAT,IAAI,IAAI;AACZ,eAAO,KAAKsB,kBAAL,CAAwBtB,IAAI,CAACI,IAA7B,EAAmCJ,IAAI,CAACE,GAAxC,MAAiD,IAAxD;AACD,OAHK,CAAR;AAID,KAtMkB;;AAAA,SAwMnBuB,kBAxMmB,GAwME,MAAM;AACzB,UAAI,KAAKhE,KAAL,CAAWwC,QAAX,GAAsB,GAAtB,IAA6B,KAAKxC,KAAL,CAAWwC,QAAX,GAAsB,GAAvD,EAA4D;AAC1D,YAAI,KAAKxC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,CAAhE,IACC,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,GADrE,EAC2E;AACzE,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,CAAC,GAAf;AACA,eAAKC,MAAL,GAAc,GAAd;AACD,SALD,MAMK,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,GAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,GADhE,EACsE;AACzE,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,CAAC,CAAf;AACA,eAAKC,MAAL,GAAc,CAAd;AACD,SALI,MAMA,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IADhE,EACuE;AAC1E,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,CAAC,GAAf;AACA,eAAKC,MAAL,GAAc,GAAd;AACD,SALI,MAMA,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IADhE,EACuE;AAC1E,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,CAAd;AACA,eAAKC,MAAL,GAAc,CAAd;AACD,SALI,MAMA,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IADhE,EACuE;AAC1E,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,GAAd;AACA,eAAKC,MAAL,GAAc,GAAd;AACD,SALI,MAMA,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IADhE,EACuE;AAC1E,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,CAAd;AACA,eAAKC,MAAL,GAAc,CAAd;AACD,SALI,MAMA,IAAI,KAAKnE,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,IAA8B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,IAAjE,IACJ,KAAKtB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA6B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAAL,GAAgB,CADhE,EACoE;AACvE,eAAK2C,OAAL,GAAe,IAAf;AACA,eAAKC,MAAL,GAAc,GAAd;AACA,eAAKC,MAAL,GAAc,GAAd;AACD;AACF;;AAED,aAAQ,KAAKnE,KAAL,CAAWwC,QAAX,GAAsB,GAAtB,IACH,KAAKxC,KAAL,CAAWwC,QAAX,GAAsB,GADnB,IAEH,KAAKxC,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4B,KAAK1C,KAAL,CAAWuB,KAFpC,IAGH,KAAKvB,KAAL,CAAW0C,SAAX,GAAuB,EAAvB,GAA4B,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,KAAKD,QAHzD;AAID,KA1PkB;;AAAA,SA4PnBT,WA5PmB,GA4PL,MAAM;AAClB,UAAI,KAAKa,YAAT,EAAuB;AACrB,aAAKxB,QAAL,CAAc,KAAK+D,OAAL,GAAe;AAAEvB,UAAAA,SAAS,EAAE,KAAK1C,KAAL,CAAW0C,SAAX,GAAuB,KAAKwB;AAAzC,SAAf,GAAmE;AAAExB,UAAAA,SAAS,EAAE,KAAK1C,KAAL,CAAW0C,SAAX,GAAuB,KAAKwB;AAAzC,SAAjF;;AACA,YAAI,KAAKlE,KAAL,CAAW0C,SAAX,GAAuB,GAAvB,IAA8B,KAAK1C,KAAL,CAAW0C,SAAX,GAAuB,CAAzD,EACE;AACA,eAAKuB,OAAL,GAAe,CAAC,KAAKA,OAArB;AACD,SAHD,MAGO,IAAI,KAAKH,eAAL,EAAJ,EAA4B;AACjC,eAAKjB,QAAL;AACA,eAAKV,YAAL;AACA,eAAK8B,OAAL,GAAe,CAAC,KAAKA,OAArB;AACD;;AACD,aAAK/D,QAAL,CAAc,KAAKkE,MAAL,GAAc;AAAE5B,UAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAWwC,QAAX,GAAsB,KAAK2B;AAAvC,SAAd,GAAgE;AAAE3B,UAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAWwC,QAAX,GAAsB,KAAK2B;AAAvC,SAA9E;;AACA,YAAI,KAAKnE,KAAL,CAAWwC,QAAX,GAAsB,CAAtB,IAA2B,KAAKwB,kBAAL,EAA/B,EACE;AACA,eAAKI,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD,SAHD,MAGO,IAAI,KAAKL,eAAL,EAAJ,EAA4B;AACjC,eAAKlB,QAAL;AACA,eAAKV,YAAL;AACA,eAAKiC,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD;;AACD,YAAI,KAAKpE,KAAL,CAAWwC,QAAX,GAAsB,GAA1B,EAA+B;AAC7B,eAAKd,YAAL,GAAoB,KAApB;AACA,eAAK0C,MAAL,GAAc,KAAd;AACA,eAAKzC,WAAL,GAAmB,CAAnB;AACA,eAAKsC,OAAL,GAAe,IAAf;AACA,eAAKI,IAAL,GAAY,KAAKA,IAAL,GAAY,CAAxB;AACD;AACF,OA1BD,MA0BO;AACL,aAAKnE,QAAL,CAAc;AAAEsC,UAAAA,QAAQ,EAAE,GAAZ;AAAiBE,UAAAA,SAAS,EAAE,KAAK1C,KAAL,CAAWuB,KAAX,GAAmB,EAAnB,GAAwB,KAAKD,QAAL,GAAgB;AAApE,SAAd;AACA,aAAK4C,MAAL,GAAc,GAAd;AACA,aAAKC,MAAL,GAAc,GAAd;AACD;;AAED,UAAI,KAAKnE,KAAL,CAAWsE,KAAX,GAAmB,CAAvB,EAA0B;AACxB,aAAKpE,QAAL,CAAc;AAAEoE,UAAAA,KAAK,EAAE,KAAKtE,KAAL,CAAWsE,KAAX,GAAmB;AAA5B,SAAd;AACD,OAFD,MAEO;AACL,aAAKpE,QAAL,CAAc;AAAEoE,UAAAA,KAAK,EAAE;AAAT,SAAd;AACD;;AAED,WAAKhD,QAAL,KAAkB,GAAlB,IAAyBX,UAAU,CAAC,MAAM,KAAKW,QAAL,GAAgB,GAAvB,EAA4B,IAA5B,CAAnC;AACA,WAAK6B,OAAL,IAAgBxC,UAAU,CAAC,MAAM,KAAKwC,OAAL,GAAe,KAAtB,EAA6B,IAA7B,CAA1B;AAEA,WAAKnD,KAAL,CAAWqC,SAAX,CAAqBO,MAArB,KAAgC,CAAhC,IAAqCzC,YAAY,CAAC,KAAKG,YAAN,CAAjD;AAEA,WAAKD,YAAL,GAAoBM,UAAU,CAAC,KAAKE,WAAN,EAAmB,KAAK0D,QAAxB,CAA9B;AACD,KAzSkB;;AAAA,SA2SnBC,YA3SmB,GA2SJ,MAAM;AACnB,YAAM3C,KAAK,GAAG,EAAd,CADmB,CAEnB;AACA;AACA;AACA;AACA;;AACAA,MAAAA,KAAK,CAAC4C,IAAN,CAAW;AAAEhC,QAAAA,GAAG,EAAE,CAAP;AAAUE,QAAAA,IAAI,EAAE;AAAhB,OAAX;AACA,aAAOd,KAAP;AACD,KApTkB;;AAAA,SAsTnBjB,SAtTmB,GAsTP,MAAM;AAChB,UAAI,KAAK8D,WAAT,EAAsB;AACpB,aAAKxE,QAAL,CAAc;AAAEmD,UAAAA,UAAU,EAAE,KAAKrD,KAAL,CAAWqD,UAAX,GAAwB;AAAtC,SAAd;AACD,OAFD,MAEO;AACL,aAAKnD,QAAL,CAAc;AAAEmD,UAAAA,UAAU,EAAE,KAAKrD,KAAL,CAAWqD,UAAX,GAAwB;AAAtC,SAAd;AACD;;AACD,UAAI,KAAKrD,KAAL,CAAWqD,UAAX,GAAwB,MAAM,EAAlC,EACE,KAAKqB,WAAL,GAAmB,KAAnB,CADF,KAGK,IAAI,KAAK1E,KAAL,CAAWqD,UAAX,GAAwB,EAA5B,EAAgC;AACnC,aAAKqB,WAAL,GAAmB,IAAnB;AACD;AACD,WAAKtE,WAAL,GAAmBO,UAAU,CAAC,KAAKC,SAAN,EAAiB,GAAjB,CAA7B;AACD,KAnUkB;;AAAA,SAqUnB+D,UArUmB,GAqUN,MAAM;AACjB,WAAKN,IAAL,GAAY,CAAZ;AACA,WAAKZ,GAAL,GAAW,KAAX;AACA,WAAKvD,QAAL,CAAc;AAAEmC,QAAAA,SAAS,EAAE,KAAKmC,YAAL,EAAb;AAAkCvB,QAAAA,KAAK,EAAE,EAAzC;AAA6C2B,QAAAA,IAAI,EAAE;AAAnD,OAAd;AACD,KAzUkB;;AAAA,SA2UnB7D,SA3UmB,GA2UP,MAAM;AAChB,UAAI,KAAKjB,KAAL,CAAW+E,OAAX,KAAuB,IAA3B,EAAiC;AAC/B,YAAI,KAAK7E,KAAL,CAAW4E,IAAX,GAAkB,CAAtB,EAAyB;AACvB,eAAK1E,QAAL,CAAc;AAAE0E,YAAAA,IAAI,EAAE,KAAK5E,KAAL,CAAW4E,IAAX,GAAkB;AAA1B,WAAd;AACD;;AACD,YAAI,KAAK5E,KAAL,CAAW4E,IAAX,IAAmB,CAAvB,EAA0B;AACxB,eAAK1E,QAAL,CAAc;AAAE4E,YAAAA,KAAK,EAAE;AAAT,WAAd;AACD;;AACD,YAAI,KAAK9E,KAAL,CAAW4E,IAAX,KAAoB,CAAxB,EAA2B,CAC1B;;AACD,aAAKrE,YAAL,GAAoBI,UAAU,CAAC,KAAKI,SAAN,EAAiB,IAAjB,CAA9B;AACD;AACF,KAvVkB;;AAEjB,SAAKwD,QAAL,GAAgB,CAAhB;AACA,SAAKG,WAAL,GAAmB,IAAnB;AACA,SAAKT,OAAL,GAAe,IAAf;AACA,SAAKG,MAAL,GAAc,KAAd;AACA,SAAK1C,YAAL,GAAoB,KAApB;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAK0C,IAAL,GAAY,CAAZ;AACA,SAAK/C,QAAL,GAAgB,GAAhB;AACA,SAAK6B,OAAL,GAAe,KAAf;AACA,SAAKe,MAAL,GAAc,GAAd;AACA,SAAKC,MAAL,GAAc,GAAd;AACA,SAAKV,GAAL,GAAW,KAAX;AACA,SAAKE,KAAL,GAAa,KAAb;AACA,SAAKrD,YAAL,GAAoB,EAApB;AACA,SAAKD,YAAL,GAAoB,EAApB;AACA,SAAKD,WAAL,GAAmB,EAAnB;AACA,SAAKG,YAAL,GAAoB,EAApB;AACA,SAAKP,KAAL,GAAa;AACXqD,MAAAA,UAAU,EAAE,CADD;AAEXX,MAAAA,SAAS,EAAE,EAFA;AAGXF,MAAAA,QAAQ,EAAE,GAHC;AAIXH,MAAAA,SAAS,EAAE,KAAKmC,YAAL,EAJA;AAKXjD,MAAAA,KAAK,EAAE,GALI;AAMX0B,MAAAA,KAAK,EAAE,EANI;AAOXG,MAAAA,KAAK,EAAE,EAPI;AAQXkB,MAAAA,KAAK,EAAE,CARI;AASXS,MAAAA,SAAS,EAAE,KATA;AAUXH,MAAAA,IAAI,EAAE,EAVK;AAWXE,MAAAA,KAAK,EAAE,OAXI;AAYX7E,MAAAA,KAAK,EAAE;AAZI,KAAb;AAcA,SAAK4B,KAAL,GAAa,IAAImD,KAAJ,CAAUzF,QAAV,CAAb;AACA,SAAKyC,MAAL,GAAc,IAAIgD,KAAJ,CAAUvF,SAAV,CAAd;AACA,SAAKyC,GAAL,GAAW,IAAI8C,KAAJ,CAAUtF,MAAV,CAAX;AACD;;AAqTDuF,EAAAA,iBAAiB,GAAG;AAClB,SAAKpE,WAAL;AACA,SAAKG,OAAL;AACA,SAAKJ,SAAL;AACA,SAAKG,SAAL;AACA,SAAKD,QAAL;AACD;;AAEDoE,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AAC1C,WAAOA,SAAS,CAACd,KAAV,KAAoB,CAApB,IAAyB,KAAKtE,KAAL,CAAW0C,SAAX,GAAuB,GAAhD,IAAuD,KAAK1C,KAAL,CAAW0C,SAAX,GAAuB,CAArF;AACD;;AAGD2C,EAAAA,MAAM,GAAG;AAAA,wBACuD,KAAKrF,KAD5D;AAAA,UACC0C,SADD,eACCA,SADD;AAAA,UACYF,QADZ,eACYA,QADZ;AAAA,UACsBjB,KADtB,eACsBA,KADtB;AAAA,UAC6B8B,UAD7B,eAC6BA,UAD7B;AAAA,UACyChB,SADzC,eACyCA,SADzC;AAEP,WACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,KAAK,EAAE;AAAEiD,QAAAA,SAAS,EAAE,KAAKnC,OAAL,GAAe,wBAAf,GAA0C;AAAvD,OAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC,KAAKkB,IAAL,KAAc,CAAd,IAAmB,KAAKrE,KAAL,CAAW4E,IAAX,KAAoB,CAAvC,IAA4C,KAAKjB,KAAL,KAAe,IAA5D,KAAqE,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAE,KAAKgB,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADxE,EAEG,KAAKlB,GAAL,IAAY,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE,KAAKkB,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFf,EAGE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAE,KAAKN,IAAL,IAAa,CAAb,GAAiB,MAAjB,GAA0B,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,SAAS,EAAE,KAAKA,IAAL,IAAa,CAAb,GAAiB,MAAjB,GAA0B,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAK,MAAA,SAAS,EAAE,KAAKA,IAAL,IAAa,CAAb,GAAiB,MAAjB,GAA0B,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADF,EAME;AAAQ,MAAA,OAAO,EAAE,KAAKtE,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eANF,EAOG,KAAKD,KAAL,CAAW+E,OAAX,KAAuB,IAAvB,IAA+B,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAE,KAAK7E,KAAL,CAAW4E,IAA5B;AAAkC,MAAA,KAAK,EAAE,KAAK5E,KAAL,CAAW8E,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPlC,CAHF,EAYE;AAAK,MAAA,KAAK,EAAE;AAAES,QAAAA,QAAQ,EAAE,UAAZ;AAAwBC,QAAAA,MAAM,EAAE,OAAhC;AAAyCC,QAAAA,KAAK,EAAE,KAAhD;AAAuDhD,QAAAA,GAAG,EAAE;AAA5D,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEY,UAAhB;AAA4B,MAAA,WAAW,EAAE,KAAKqB,WAA9C;AAA2D,MAAA,OAAO,EAAErC,SAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEG,KAAKrC,KAAL,CAAWqC,SAAX,CAAqBqD,GAArB,CAAyBnD,IAAI,IAAI;AAChC,aACE,oBAAC,MAAD;AACE,QAAA,GAAG,EAAEA,IAAI,CAACE,GADZ;AAEE,QAAA,IAAI,EAAEF,IAAI,CAACI,IAFb;AAGE,QAAA,GAAG,EAAEJ,IAAI,CAACE,GAAL,GAAW,GAAX,GAAiBF,IAAI,CAACI,IAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAOD,KARA,CAFH,EAWG,KAAK3C,KAAL,CAAWiD,KAAX,CAAiByC,GAAjB,CAAqBnD,IAAI,IAAI;AAC5B,aACE,oBAAC,KAAD;AACE,QAAA,GAAG,EAAEA,IAAI,CAACE,GADZ;AAEE,QAAA,IAAI,EAAEF,IAAI,CAACI,IAAL,GAAY,EAFpB;AAGE,QAAA,GAAG,EAAEJ,IAAI,CAACE,GAAL,GAAW,GAAX,GAAiBF,IAAI,CAACI,IAH7B;AAIE,QAAA,QAAQ,EAAE,KAAKO,cAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAOD,KARA,CAXH,EAqBG,KAAKlD,KAAL,CAAWoD,KAAX,CAAiBsC,GAAjB,CAAqBnD,IAAI,IAAI;AAC5B,aACE,oBAAC,KAAD;AACE,QAAA,KAAK,EAAE,KAAKvC,KAAL,CAAWC,KADpB;AAEE,QAAA,IAAI,EAAEsC,IAFR;AAGE,QAAA,GAAG,EAAEA,IAHP;AAIE,QAAA,cAAc,EAAE,KAAKgB,cAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAQD,KATA,CArBH,EAgCG,KAAKvD,KAAL,CAAWqC,SAAX,CAAqBO,MAArB,KAAgC,CAAhC,IACC,oBAAC,WAAD;AACE,MAAA,IAAI,EAAE,KAAK5C,KAAL,CAAWqD,UADnB;AAEE,MAAA,aAAa,EAAE,KAAKG,aAFtB;AAGE,MAAA,iBAAiB,EAAE,KAAKE,iBAH1B;AAIE,MAAA,KAAK,EAAE,KAAK1D,KAAL,CAAWC,KAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjCJ,EAwCE,oBAAE,KAAF;AAAQ,MAAA,IAAI,EAAEyC,SAAd;AAAyB,MAAA,GAAG,EAAEF,QAA9B;AAAwC,MAAA,IAAI,EAAE,KAAKd,YAAnD;AAAiE,MAAA,KAAK,EAAEW,SAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCF,EA0CE,oBAAC,GAAD;AAAK,MAAA,IAAI,EAAEd,KAAX;AAAkB,MAAA,KAAK,EAAE,KAAKD,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1CF,CAZF,CADF;AA2DD;;AApa0B;;AAua7B,eAAe1B,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport './Game.css';\nimport Point from '../components/Point';\nimport Bricks from '../components/Bricks';\nimport Pad from '../components/Pad';\nimport Bonus from '../components/Bonus';\nimport MoveBart from '../components/MoveBart'\nimport Popuploose from '../components/Popuploose';\nimport Popupwin from '../components/Popupwin';\nimport Countdown from '../components/Countdown';\nimport brickUrl from '../musique/brick.mp3'\nimport Malus from '../components/Malus';\nimport dunutsUrl from '../musique/donuts.mp3'\nimport dohUrl from '../musique/doh.mp3'\nimport FallingBart from '../components/FallingBart';\n\nclass Game extends Component {\n  constructor(props) {\n    super(props)\n    this.interval = 5;\n    this.bartGoRight = true;\n    this.goRight = true;\n    this.goDown = false;\n    this.isBallMoving = false;\n    this.counterBall = 0;\n    this.life = 3;\n    this.padWidth = 100;\n    this.malusOn = false;\n    this.speedX = 1.5;\n    this.speedY = 1.5;\n    this.win = false;\n    this.loose = false;\n    this.malusTimeOut = '';\n    this.balleTimeOut = '';\n    this.bartTimeOut = '';\n    this.timerTimeOut = '';\n    this.state = {\n      bartDepart: 0,\n      pointLeft: 20,\n      pointTop: 400,\n      brickWall: this.getBrickWall(),\n      xLeft: 140,\n      bonus: [],\n      malus: [],\n      timer: 0,\n      isPlaying: false,\n      time: 61,\n      color: 'white',\n      pause: false,\n    }\n    this.brick = new Audio(brickUrl);\n    this.dunuts = new Audio(dunutsUrl);\n    this.doh = new Audio(dohUrl);\n  }\n\n  getPause = () => {\n    if (!this.state.pause) {\n      this.setState({\n          pause: true\n      })\n      clearTimeout(this.bartTimeOut)\n      clearTimeout(this.balleTimeOut)\n      clearTimeout(this.malusTimeOut)\n      clearTimeout(this.timerTimeOut)\n      console.log(`pause = ${this.state.pause}`)\n    } else {\n      this.setState({\n        pause: fal\n    })\n      setTimeout(this.MouvBartX)\n      setTimeout(this.moovingBall)\n      setTimeout(this.getMalus)\n      setTimeout(this.countDown)\n      console.log(`pause = ${this.state.pause}`)\n    }\n  }\n\n  movePad = () => {\n    document.addEventListener('touchstart', event => {\n      if ((event.touches[0].pageX - this.padWidth / 2 > 2) && (event.touches[0].pageX - this.padWidth / 2 < 373 - this.padWidth))\n        this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        })\n      // if - else if : Compteur pour déplacer la balle avant de l'envoyer\n      if (!this.isBallMoving && this.counterBall === 1) {\n        this.isBallMoving = true\n      } else if (!this.isBallMoving) {\n        this.counterBall++\n      }\n    }, false);\n    document.addEventListener('touchmove', event => {\n      if ((this.state.xLeft > 2) && (this.state.xLeft < 373 - this.padWidth)) {\n        this.setState({\n          xLeft: Math.ceil(event.touches[0].pageX - this.padWidth / 2)\n        })\n      }\n      if (this.state.xLeft <= 2) {\n        this.setState({\n          xLeft: 3\n        })\n      }\n      if (this.state.xLeft >= 373 - this.padWidth) {\n        this.setState({\n          xLeft: 372 - this.padWidth\n        })\n      }\n    }, false);\n\n  }\n\n  manageAudioBricks = () => {\n    this.brick.play()\n  }\n\n  manageAudioDunuts = () => {\n    this.dunuts.play()\n  }\n\n  manageAudioDoh = () => {\n    this.doh.play()\n  }\n\n  deleteBricks = () => {\n    const newBrickWall = this.state.brickWall\n      .filter(item => {\n        return !(this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67)\n      })\n    if (newBrickWall.length < this.state.brickWall.length) {\n      this.manageAudioBricks()\n    }\n    this.setState({\n      brickWall: newBrickWall\n    })\n\n  }\n\n  getBonus = () => {\n    if ((Math.ceil(Math.random() * 8) === 8) && (this.padWidth === 100)) {\n      const newDonutsTab = this.state.brickWall\n        .find(item => {\n          return (this.state.pointTop + 20 > item.top && this.state.pointTop < item.top + 20 && this.state.pointLeft + 20 > item.left && this.state.pointLeft < item.left + 67)\n        })\n      this.setState({ bonus: [...this.state.bonus, newDonutsTab] })\n    }\n  }\n\n  isBonusCollide = (top, left) => {\n    if (top > 472\n      && top <= 475\n      && left + 10 > this.state.xLeft\n      && left - 10 < this.state.xLeft + this.padWidth) {\n      this.padWidth = 150;\n      this.manageAudioDunuts()\n      return true\n    }\n  }\n\n  getMalus = () => {\n    if (!this.malusOn) {\n      //On change l'état au bout d'un temps random puis on rappelle la fonction. \n      this.malusTimeOut = setTimeout(() => {\n        this.setState({\n          malus: [...this.state.malus, this.state.bartDepart]\n        })\n        this.getMalus();\n      }, Math.floor(Math.random() * (10000 - 5000 + 1)) + 5000)\n    }\n  }\n\n  isMalusCollide = (top, left) => {\n    if (top > 472\n      && top <= 475\n      && left + 10 > this.state.xLeft\n      && left - 10 < this.state.xLeft + this.padWidth) {\n      this.malusOn = true;\n      this.manageAudioDoh()\n      return true\n    }\n  }\n\n  isBartCollide = (top, left) => {\n    if (top > 472\n      && top <= 475\n      && left + 10 > this.state.xLeft\n      && left - 10 < this.state.xLeft + this.padWidth) {\n      this.win = true;\n      return true\n    }\n  }\n\n  isBartDontCollide = () => {\n    this.loose = true\n  }\n\n  generateIfCollideX = (left, top) => {\n    // 10 correspond à la moitié de la balle, 2.5 à la moitié du espace vertical, 5 à la moitié d'un espace horizontal\n    return (this.state.pointTop + 10 > top - 2.5 && this.state.pointTop + 10 < top + 22.5 && this.state.pointLeft + 20 > left && this.state.pointLeft < left + 67)\n  }\n\n  generateIfCollideY = (left, top) => {\n    return (this.state.pointTop + 20 > top && this.state.pointTop < top + 20 && this.state.pointLeft + 10 > left - 5 && this.state.pointLeft + 10 < left + 67 + 5)\n  }\n\n  checkIfCollideX = () => {\n    return (this.state.brickWall\n      .find(item => {\n        return this.generateIfCollideX(item.left, item.top) === true\n      }))\n  }\n\n  checkIfCollideY = () => {\n    return (this.state.brickWall\n      .find(item => {\n        return this.generateIfCollideY(item.left, item.top) === true\n      }))\n  }\n\n  checkIfCollidePadY = () => {\n    if (this.state.pointTop > 472 && this.state.pointTop < 474) {\n      if (this.state.pointLeft + 10 > (this.state.xLeft + this.padWidth * 0)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.1)) {\n        this.goRight = true;\n        this.speedX = -1.5;\n        this.speedY = 1.5\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.1)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.3)) {\n        this.goRight = true;\n        this.speedX = -1;\n        this.speedY = 2\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.30)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.45)) {\n        this.goRight = true;\n        this.speedX = -0.5;\n        this.speedY = 2.5\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.45)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.55)) {\n        this.goRight = true;\n        this.speedX = 0;\n        this.speedY = 3\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.55)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.70)) {\n        this.goRight = true;\n        this.speedX = 0.5;\n        this.speedY = 2.5\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.70)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 0.90)) {\n        this.goRight = true;\n        this.speedX = 1;\n        this.speedY = 2\n      }\n      else if (this.state.pointLeft + 10 >= (this.state.xLeft + this.padWidth * 0.90)\n        && this.state.pointLeft - 10 < (this.state.xLeft + this.padWidth * 1)) {\n        this.goRight = true;\n        this.speedX = 1.5;\n        this.speedY = 1.5\n      }\n    }\n\n    return (this.state.pointTop > 472\n      && this.state.pointTop < 474\n      && this.state.pointLeft + 10 > this.state.xLeft\n      && this.state.pointLeft - 10 < this.state.xLeft + this.padWidth)\n  }\n\n  moovingBall = () => {\n    if (this.isBallMoving) {\n      this.setState(this.goRight ? { pointLeft: this.state.pointLeft + this.speedX } : { pointLeft: this.state.pointLeft - this.speedX })\n      if (this.state.pointLeft > 355 || this.state.pointLeft < 0\n      ) {\n        this.goRight = !this.goRight\n      } else if (this.checkIfCollideX()) {\n        this.getBonus()\n        this.deleteBricks()\n        this.goRight = !this.goRight\n      }\n      this.setState(this.goDown ? { pointTop: this.state.pointTop + this.speedY } : { pointTop: this.state.pointTop - this.speedY })\n      if (this.state.pointTop < 0 || this.checkIfCollidePadY()\n      ) {\n        this.goDown = !this.goDown\n      } else if (this.checkIfCollideY()) {\n        this.getBonus()\n        this.deleteBricks()\n        this.goDown = !this.goDown\n      }\n      if (this.state.pointTop > 587) {\n        this.isBallMoving = false\n        this.goDown = false\n        this.counterBall = 0\n        this.goRight = true\n        this.life = this.life - 1\n      }\n    } else {\n      this.setState({ pointTop: 472, pointLeft: this.state.xLeft - 10 + this.padWidth / 2, })\n      this.speedX = 1.5\n      this.speedY = 1.5\n    }\n\n    if (this.state.timer < 8) {\n      this.setState({ timer: this.state.timer + 1 })\n    } else {\n      this.setState({ timer: 0 })\n    }\n\n    this.padWidth === 150 && setTimeout(() => this.padWidth = 100, 6000)\n    this.malusOn && setTimeout(() => this.malusOn = false, 6000)\n\n    this.state.brickWall.length === 0 && clearTimeout(this.malusTimeOut)\n\n    this.balleTimeOut = setTimeout(this.moovingBall, this.interval)\n  }\n\n  getBrickWall = () => {\n    const brick = [];\n    // for (let i = 0; i < 6; i++) {\n    //   for (let j = 0; j < 5; j++) {\n    //     brick.push({ top: i * 25, left: j * 77 })\n    //   }\n    // }\n    brick.push({ top: 0, left: 0 })\n    return brick;\n  }\n\n  MouvBartX = () => {\n    if (this.bartGoRight) {\n      this.setState({ bartDepart: this.state.bartDepart + 5 })\n    } else {\n      this.setState({ bartDepart: this.state.bartDepart - 5 })\n    }\n    if (this.state.bartDepart > 375 - 35)\n      this.bartGoRight = false;\n\n    else if (this.state.bartDepart < 35) {\n      this.bartGoRight = true\n    }\n    this.bartTimeOut = setTimeout(this.MouvBartX, 100)\n  }\n\n  getRestart = () => {\n    this.life = 3\n    this.win = false\n    this.setState({ brickWall: this.getBrickWall(), bonus: [], time: 61 })\n  }\n\n  countDown = () => {\n    if (this.props.counter === true) {\n      if (this.state.time > 0) {\n        this.setState({ time: this.state.time - 1 })\n      }\n      if (this.state.time <= 9) {\n        this.setState({ color: \"red\" })\n      }\n      if (this.state.time === 0) {\n      }\n      this.timerTimeOut = setTimeout(this.countDown, 1000)\n    }\n  }\n\n  componentDidMount() {\n    this.moovingBall()\n    this.movePad()\n    this.MouvBartX()\n    this.countDown()\n    this.getMalus()\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.timer === 8 || this.state.pointLeft > 355 || this.state.pointLeft < 0;\n  }\n\n\n  render() {\n    const { pointLeft, pointTop, xLeft, bartDepart, brickWall } = this.state\n    return (\n      <div className=\"Game\" style={{ transform: this.malusOn ? 'scale(0.85) scaleX(-1)' : 'scale(0.85)' }}>\n        {(this.life === 0 || this.state.time === 0 || this.loose === true) && <Popuploose restart={this.getRestart} />}\n        {this.win && <Popupwin restart={this.getRestart} />}\n        <div className=\"header\">\n          <div className=\"lifeBar\">\n            <div className={this.life >= 3 ? \"life\" : \"noLife\"}></div>\n            <div className={this.life >= 2 ? \"life\" : \"noLife\"}></div>\n            <div className={this.life >= 1 ? \"life\" : \"noLife\"}></div>\n          </div>\n          <button onClick={this.getPause}>Pause</button>\n          {this.props.counter === true && <Countdown time={this.state.time} color={this.state.color}></Countdown>}\n        </div>\n        <div style={{ position: 'relative', height: '600px', width: '375', top: '67px' }}>\n          <MoveBart left={bartDepart} bartGoRight={this.bartGoRight} endGame={brickWall} />\n          {this.state.brickWall.map(item => {\n            return (\n              <Bricks\n                top={item.top}\n                left={item.left}\n                key={item.top + '-' + item.left}\n              />\n            );\n          })}\n          {this.state.bonus.map(item => {\n            return (\n              <Bonus\n                top={item.top}\n                left={item.left + 10}\n                key={item.top + '-' + item.left}\n                callback={this.isBonusCollide} />\n            )\n          }\n          )}\n          {this.state.malus.map(item => {\n            return (\n              <Malus\n                pause={this.state.pause}\n                left={item}\n                key={item}\n                isMalusCollide={this.isMalusCollide}\n              />\n            )\n          }\n          )}\n          {this.state.brickWall.length === 0 &&\n            <FallingBart\n              left={this.state.bartDepart}\n              isBartCollide={this.isBartCollide}\n              isBartDontCollide={this.isBartDontCollide}\n              pause={this.state.pause}\n            />\n          }\n          < Point left={pointLeft} top={pointTop} move={this.isBallMoving} brick={brickWall} />\n          {/* <div style={{width: `${this.padWidth}px` , zIndex:'1000', position:'absolute', top:'492px', left:`${xLeft}px`, border: '2px red solid'}}></div> */}\n          <Pad left={xLeft} width={this.padWidth} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}